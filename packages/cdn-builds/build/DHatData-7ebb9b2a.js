import{p as t,b as e}from"./WebsiteData-d6af3ceb.js";import{D as s,W as i}from"./LibrariesData-f0fbd4c5.js";import{G as a}from"./GeneralSearchResult-331b56d5.js";import{G as r}from"./ArticlesData-c1e511c9.js";class n extends s{constructor(){super(...arguments),this.type="page",this.items=[]}parseResults(e){e.data.forEach((t=>{const{attributes:{drupal_internal__nid:s},meta:i}=t,a=s,r=e.meta.extra_data[a];t.meta=r})),this.items=e.data.map(t),this.meta.totalResults=e.meta.count,this.meta.url=`${i}?keys=${this.query}`}}class o extends a{constructor(t){super(t)}}class l extends s{constructor(){super(...arguments),this.type="person",this.items=[]}parseResults(t){t.data.forEach((e=>{const s=e.attributes.drupal_internal__nid,i=t.meta.extra_data[s];e.meta=i})),this.items=t.data.map(e),this.meta.totalResults=t.meta.count,this.meta.url=`https://library.virginia.edu/search/node?keys=${this.query}`}}class c{constructor(t){Object.assign(this,t)}}function p(t){return new c({id:t.title,title:t.title,type:t.Type.toLowerCase(),description:t.Body,images:t["Featured Image"]?[{alt:t["Featured Image"].alt,url:t["Featured Image"].src}]:void 0,materials:t["MAO Materials"]?t["MAO Materials"].split(","):void 0,link:`https://dh.library.virginia.edu${t.Path}`})}function u(t){const e=p(t);return e.webLinks=function(t){let e;if(t.blogTitles&&t.blogURLs){const s=t.blogTitles.split(","),i=t.blogURLs.split(",");e=s.map(((t,e)=>({title:t,url:i[e],type:"blog"})))}if(t.otherLinkTitles&&t.otherLinkURLs){e||(e=[]);const s=t.otherLinkTitles.split(","),i=t.otherLinkURLs.split(",");e=e.concat(s.map(((t,e)=>({title:t,url:i[e],type:"other"}))))}if(t.publicationLinkTitles&&t.publicationLinkURLs){e||(e=[]);const s=t.publicationLinkTitles.split(","),i=t.publicationLinkURLs.split(",");e=e.concat(s.map(((t,e)=>({title:t,url:i[e],type:"publication"}))))}return e}(t),e.email=t.Email,e.name=t.Name,e.computingId=t["UVA ID"],e}function m(t){const e=p(t);return e.location=t.Location,e.affiliatedUVA=!("Not UVa"===t["Not UVa Affiliated"]),e.certificate=!("no"===t["Certificate Event"]),e.eventType=t["Event Type"],e}class h extends r{constructor(t){super(),this.items=[],this.limit=1e4,this.types={Organization:p,Profile:u,Tool:p,News:p,Event:m,Relationship:p,job:p,"Basic page":p,Course:p},Object.assign(this,t)}async fetchData(){return fetch("https://api.library.virginia.edu/dh/node-listing").then((t=>t.json())).then((t=>this.parseResults(t)))}parseResults(t){return this.items=t.nodes.filter((t=>Object.keys(this.types).includes(t.node.Type))).map((t=>Object.keys(this.types).includes(t.node.Type)?this.types[t.node.Type](t.node):p(t.node))),{items:this.items.slice(0,this.limit),meta:{totalResults:this.items.length}}}}export{h as D,n as P,o as V,l as a};
