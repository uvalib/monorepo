import{G as e,a as t}from"./ArticlesData-c1e511c9.js";import{G as i}from"./GeneralSearchResult-331b56d5.js";const s="https://mlbib.library.virginia.edu/json/extras.json",r="https://mlbib.library.virginia.edu/json/years.json";class a extends i{constructor(e){super(e)}}class n extends e{constructor(e){super(),this.searchIndex=new t({document:{id:"id",index:["plainText"],store:["title","plainText"]}}),this.searchReady=!1,this.items=[],this.ids=[],Object.assign(this,e),this.initSearchIndex()}async initSearchIndex(){try{const[e,t]=await Promise.all([fetch(s).then((e=>e.json())),fetch(r).then((e=>e.json()))]);[...e,...t].forEach((e=>{this.searchIndex.add(e)})),this.searchReady=!0}catch(e){console.error("Error initializing search index:",e)}}async fetchData(){return(async()=>{for(;!this.searchReady;)await new Promise((e=>setTimeout(e,100)));return{items:this.searchIndex.search(this.query||"",{enrich:!0})[0].result.map((e=>{return new a({id:(t=e).id,title:t.doc.title,description:t.doc.plainText,link:t.id.match(/^\d+$/)?`https://mlbib.library.virginia.edu/year/${t.id}.html`:`https://mlbib.library.virginia.edu/${t.id}.html`});var t})),meta:{}}})()}}export{n as M,r as a,a as b,s as m};
