import{G as t}from"./GeneralSearchResult-331b56d5.js";import{G as e}from"./ArticlesData-e9b81d53.js";function a(t,e){if(e.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+e.length+" present")}function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function n(t){if(a(1,arguments),"string"==typeof t){var e=t.match(/(\d{4})-(\d{2})-(\d{2})[T ](\d{2}):(\d{2}):(\d{2})(?:\.(\d{0,7}))?(?:Z|(.)(\d{2}):?(\d{2})?)?/);return e?new Date(Date.UTC(+e[1],+e[2]-1,+e[3],+e[4]-(+e[9]||0)*("-"==e[8]?-1:1),+e[5]-(+e[10]||0)*("-"==e[8]?-1:1),+e[6],+((e[7]||"0")+"00").substring(0,3))):new Date(NaN)}return function(t){a(1,arguments);var e=Object.prototype.toString.call(t);return t instanceof Date||"object"===s(t)&&"[object Date]"===e?new Date(t.getTime()):"number"==typeof t||"[object Number]"===e?new Date(t):("string"!=typeof t&&"[object String]"!==e||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}(t)}class i extends t{constructor(t){super(t)}}function r(t){return{id:t.id,title:t.title,allday:t.allday,start:t.start?n(t.start).getTime():null,end:t.end?n(t.end).getTime():null,description:t.description,link:t.url.public,location:t.location.name,campusLocation:t.campus,category:t.category.name,owner:t.owner.name,calendar:{name:t.calendar.name,url:t.calendar.public},registration:t.registration,registrationOpen:t.has_registration_opened,registrationClosed:t.has_registration_closed,seats:t.seats,seatsTaken:t.seats_taken,physicalSeats:t.physical_seats,physicalSeatsTaken:t.physical_seats_taken,onlineSeats:t.online_seats,onlineSeatsTaken:t.online_seats_taken,waitList:t.wait_list,image:t.featured_image,futureDates:t.future_dates.map((t=>({id:t.event_id,start:n(t.start).getTime()}))),registrationCost:t.registration_cost,moreInfo:t.more_info,setupTime:t.setup_time,teardownTime:t.teardown_time}}class o extends e{constructor(t){super(),this.items=[],Object.assign(this,t)}endpointURL(){let t=this.query?`&search=${this.query}`:"";return t+=this.limit?`&limit=${this.limit}`:"",t+=this.category?`&category=${this.category}`:"",this.query?`https://api2.libcal.com/1.0/event_search?key=c45a1428103ed000ba4025e9970edf54&iid=863&cal_id=4299&limit=600&campus=&category=&days=365${t}`:`https://api2.libcal.com/1.0/events?key=c45a1428103ed000ba4025e9970edf54&iid=863&cal_id=4299&limit=600&campus=&category=&days=365${t}`}async fetchData(){return this.fetchWithRetry(this.endpointURL()).then((t=>t.json())).then((t=>(this._parseResults(t),{items:this.items,meta:this.meta})))}_parseResults(t){this.items=t.events.map(r),this.meta.totalResults=t.events.length}}export{o as E,i as a};
