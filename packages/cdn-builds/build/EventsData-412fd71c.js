import{G as t}from"./GeneralSearchResult-331b56d5.js";import{p as e}from"./index-57095fc0.js";import{G as s}from"./ArticlesData-4e187389.js";class a extends t{constructor(t){super(t)}}function i(t){return{id:t.id,title:t.title,allday:t.allday,start:t.start?e(t.start).getTime():null,end:t.end?e(t.end).getTime():null,description:t.description,link:t.url.public,location:t.location.name,campusLocation:t.campus,category:t.category.name,owner:t.owner.name,calendar:{name:t.calendar.name,url:t.calendar.public},registration:t.registration,registrationOpen:t.has_registration_opened,registrationClosed:t.has_registration_closed,seats:t.seats,seatsTaken:t.seats_taken,physicalSeats:t.physical_seats,physicalSeatsTaken:t.physical_seats_taken,onlineSeats:t.online_seats,onlineSeatsTaken:t.online_seats_taken,waitList:t.wait_list,image:t.featured_image,futureDates:t.future_dates.map((t=>({id:t.event_id,start:e(t.start).getTime()}))),registrationCost:t.registration_cost,moreInfo:t.more_info,setupTime:t.setup_time,teardownTime:t.teardown_time}}class n extends s{constructor(t){super(),this.calId="4299",this.lid="863",this.limit=600,this.days=365,this.items=[],Object.assign(this,t)}endpointURL(){const t=this.query?"event_search":"events";let e=`?key=c45a1428103ed000ba4025e9970edf54&iid=${this.lid}&cal_id=${this.calId}&campus=&days=${this.days}${this.date?`&date=${this.date}`:""}`;return e+=`&limit=${this.limit}`,this.query&&(e+=`&search=${encodeURIComponent(this.query)}`),this.category&&(e+=`&category=${this.category}`),`https://api2.libcal.com/1.0/${t}${e}`}async fetchData(){return this.fetchWithRetry(this.endpointURL()).then((t=>t.json())).then((t=>(this._parseResults(t),{items:this.items,meta:this.meta})))}_parseResults(t){this.items=t.events.map(i),this.meta.totalResults=t.events.length}}export{n as E,a};
