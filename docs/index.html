<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <meta name="Description" content="Kitchen Sink demos and overview of packages mantained in this repo.">

  <style>
    html,
    body {
      margin: 0;
      padding: 0;
    }
  </style>
  <title>Kitchen Sink example page</title>

  <link rel="stylesheet" href="https://unpkg.com/@uvalib/web-styles/css/styles.css">
  <script type="module" src="module-build/playground-ide.js"></script>
  <script type="module" src="https://www.library.virginia.edu/module-build/uvalib-page.js"></script>
</head>

<body>

<uvalib-page>
        <h1>UVA Library Monorepo Kitchen Sink</h1>

<h2><a href="https://github.com/uvalib/monorepo/tree/master/packages/data-models">Library data-models</a></h2>
      <playground-ide editable-file-system line-numbers resizable>

        <script type="sample/html" filename="index.html">
          <!doctype html>
          <body style="background-color: white">
            <script type="module" src="./index.js">&lt;/script>     
            <code></code>
          </body>
        </script>
      
        <script type="sample/js" filename="index.js">
          import { Sirsi,Catalog } from "https://www.library.virginia.edu/module-build/data-models.js";
          
      let code = document.querySelector("code");
      let dividerWidth = 50;
      function writeOutHeader(header){
        writeOutLn();writeOutLn();
        writeOutDivider('#');
        writeOutLn(header);
        writeOutDivider('#');
        writeOutLn();
      }
      function writeOutDivider(char = '-') {
        writeOutLn( new Array(dividerWidth + 1).join( char ) );
      }
      function writeOutLn(str="") {
        code.innerHTML += `${str}<br />`;
      }

      let demo = async () => {
        writeOutHeader("Demo of the Sirsi (ils-connector) library")
        let sirsi = new Sirsi({ dummyMode: true });
        sirsi
          .authorize("dhc4z", "foobar")
          .then((token) => writeOutLn(`Got a dummy sirsi token of ${token}`))
          .then(()=>{
            writeOutLn("Bravely attempt a dummy fillhold sirsi request");
            return sirsi.fillhold("5555555dummybarcode5555555").then(res => {
              writeOutDivider('*');
              writeOutLn(`<pre>${JSON.stringify(res, null, 4)}</pre>`);
              writeOutDivider('*');
            })
          })
          .then(()=>{
            writeOutLn("Next try a dummy fillhold sirsi request for a hold that returns an override");
            return sirsi.fillhold("override").then(res => {
              writeOutDivider('*');
              writeOutLn(`<pre>${JSON.stringify(res, null, 4)}</pre>`);
              writeOutDivider('*');
            })
          })
          .then(()=>{
            writeOutLn("Next try a dummy fillhold sirsi request for a hold that accepts an override");
            return sirsi.fillhold("override",true).then(res => {
              writeOutDivider('*');
              writeOutLn(`<pre>${JSON.stringify(res, null, 4)}</pre>`);
              writeOutDivider('*');
            })
          })
          .then(()=>{
            writeOutLn("Next try a dummy fillhold sirsi request for a hold that returns an error");
            return sirsi.fillhold("error").then(res => {
              writeOutDivider('*');
              writeOutLn(`<pre>${JSON.stringify(res, null, 4)}</pre>`);
              writeOutDivider('*');
            })
          })
          .then(() =>
            writeOutDivider()
          )
          .then(async () => {
            writeOutHeader("Demo of the catalog (Virgo) library");
            let cat = new Catalog({ devMode: true });
            writeOutLn("Getting a listing of result pools:");
            await cat.poolsPromise.then((pools) => {
              for (const id in pools) {
                const pool = pools[id];
                writeOutLn(`pool ${pool.id} with a name of ${pool.name}`);
              }
              writeOutDivider();
              writeOutLn("Here is our Pools object:");
              writeOutLn(`<pre>${JSON.stringify(pools, null, 4)}</pre>`);
              writeOutDivider();
            });

            writeOutDivider();
            writeOutLn(
              'Getting some results for search of "The Book of Three":'
            );
            await cat
              .fetchResults({ rows: 1, keyword: "The Book of Three" })
              .then((res) => {
                console.log(res);
                writeOutLn(
                  `We got ${res.total_hits} hits in ${res.total_time_ms} milliseconds`
                );
                writeOutLn("Here are the first results from each pool:");
                res["pool_results"].forEach((pool) =>
                  pool["group_list"][0]["record_list"].forEach((item) =>
                    writeOutLn(
                      item.fields.find((r) => r.name.indexOf("title") > -1)
                        .value
                    )
                  )
                );
              });
            writeOutDivider();
            writeOutLn(
              "Getting a listing of result pools again (from last request this time):"
            );
            await cat.poolsPromise.then((pools) => {
              for (const id in pools) {
                const pool = pools[id];
                writeOutLn(`pool ${pool.id} with a name of ${pool.name}`);
              }
            });
          });
      };

      demo();
        </script>
      </playground-ide>

<h2><a href="https://github.com/uvalib/monorepo/tree/master/packages/eslint-config">eslint-config</a></h2>
<p>Todo: Placeholder for a cross package eslint config.</p>


<h2><a href="https://github.com/uvalib/monorepo/tree/master/packages/wc-logos">&lt;uvalib-logos&gt;</a></h2>
<div class="storybook-link"><a href="/wc-logos/"">Storybook</a></div>    

      <playground-ide editable-file-system line-numbers resizable>

        <script type="sample/html" filename="index.html">
          <!doctype html>
          <body style="background-color: white">
            <script type="module" src="./index.js">&lt;/script>
            <button>Random background color</button>     
            <uvalib-logos>University of Virginia Library</uvalib-logos>
          </body>
        </script>
      
        <script type="sample/js" filename="index.js">
          import '@uvalib/uvalib-logos/uvalib-logos.js';
          
          document.querySelector('button').addEventListener("click", (e)=>{
            document.body.style.backgroundColor = '#' + Math.floor(Math.random()*16777215).toString(16);
            document.querySelector('uvalib-logos').evalBackgroundColor();
          });
        </script>
      </playground-ide>
    
<h2><a href="https://github.com/uvalib/monorepo/tree/master/packages/wc-footer">&lt;uvalib-footer&gt;</a></h2>
<div class="storybook-link"><a href="/wc-footer/"">Storybook</a></div>    

      <playground-ide editable-file-system line-numbers resizable>

        <script type="sample/html" filename="index.html">
          <!doctype html>
          <body>
            <script type="module" src="./index.js">&lt;/script>
            <uvalib-footer></uvalib-footer>
          </body>
        </script>
      
        <script type="sample/js" filename="index.js">
          import '@uvalib/uvalib-footer/uvalib-footer.js';
        </script>
      </playground-ide> 
            
<h2><a href="https://github.com/uvalib/monorepo/tree/master/packages/wc-header">&lt;uvalib-header&gt;</a></h2>
<div class="storybook-link"><a href="/wc-header/"">Storybook</a></div>    

      <playground-ide editable-file-system line-numbers resizable>

        <script type="sample/html" filename="index.html">
          <!doctype html>
          <body>
            <script type="module" src="./index.js">&lt;/script>
            <uvalib-header></uvalib-header>
          </body>
        </script>
      
        <script type="sample/js" filename="index.js">
          import '@uvalib/uvalib-header/uvalib-header.js';
        </script>
      </playground-ide> 
                  
                  
<h2><a href="https://github.com/uvalib/monorepo/tree/master/packages/wc-page">&lt;uvalib-page&gt;</a></h2>
<div class="storybook-link"><a href="/wc-page/"">Storybook</a></div>    

      <playground-ide editable-file-system line-numbers resizable>

        <script type="sample/html" filename="index.html">
          <!doctype html>
          <body>
            <script type="module" src="./index.js">&lt;/script>
            <uvalib-page .title=${title}>
              <div slot="side-aside">Some Aside Content</div>
              <div slot="side-nav">Some nav content</div>
              some more light-dom
            </uvalib-page>
          </body>
        </script>
      
        <script type="sample/js" filename="index.js">
          import '@uvalib/uvalib-page/uvalib-page.js';
        </script>
      </playground-ide>                   

<h2><a href="https://github.com/uvalib/monorepo/tree/master/packages/wc-icon">&lt;uvalib-icon&gt;</a></h2>
<div class="storybook-link"><a href="/wc-icon/"">Storybook</a></div>    

      <playground-ide editable-file-system line-numbers resizable>
        <script type="sample/importmap">
          {
            "imports": {
              "@webcomponents/scoped-custom-element-registry": "https://unpkg.com/@webcomponents/scoped-custom-element-registry"
            }
          }
        </script>
        <script type="sample/html" filename="index.html">
          <!doctype html>
          <body>
            <script type="module" src="./index.js">&lt;/script>
            <uvalib-icon icon-id="uvalib:alerts:exclamationcircle"></uvalib-icon>
            <uvalib-icon icon-id="uvalib:alerts:exclamationtriangle" ></uvalib-icon>
            <uvalib-icon icon-id="uvalib:alerts:infocircle" ></uvalib-icon>
            <uvalib-icon icon-id="uvalib:alerts:ban" ></uvalib-icon>
            <uvalib-icon icon-id="uvalib:alerts:checkcircle" ></uvalib-icon>
            <uvalib-icon icon-id="uvalib:brands:facebooksquare" ></uvalib-icon>
            <uvalib-icon icon-id="uvalib:brands:instagram" ></uvalib-icon>
            <uvalib-icon icon-id="uvalib:brands:twittersquare" ></uvalib-icon>
            <uvalib-icon icon-id="uvalib:brands:flickr" ></uvalib-icon>
            <uvalib-icon icon-id="uvalib:brands:vimeo" ></uvalib-icon>
            <uvalib-icon icon-id="uvalib:brands:youtube" ></uvalib-icon>
            <uvalib-icon icon-id="uvalib:general:clock" ></uvalib-icon>
            <uvalib-icon icon-id="uvalib:general:commentdots" ></uvalib-icon>
            <uvalib-icon icon-id="uvalib:general:usercircle" ></uvalib-icon>
            <uvalib-icon icon-id="uvalib:general:bell" ></uvalib-icon>
            <uvalib-icon icon-id="uvalib:general:chevroncircleup" ></uvalib-icon>
            <uvalib-icon icon-id="uvalib:general:search" ></uvalib-icon>
            <uvalib-icon icon-id="uvalib:general:check" ></uvalib-icon>
            <uvalib-icon icon-id="uvalib:general:externallinkalt" ></uvalib-icon>
            <uvalib-icon icon-id="uvalib:general:searchplus" ></uvalib-icon>
            <uvalib-icon icon-id="uvalib:general:university" ></uvalib-icon>
            <uvalib-icon icon-id="uvalib:general:plus" ></uvalib-icon>
            <uvalib-icon icon-id="uvalib:general:minus" ></uvalib-icon>
            <uvalib-icon icon-id="uvalib:general:caretup" ></uvalib-icon>
            <uvalib-icon icon-id="uvalib:general:caretdown" ></uvalib-icon>
            <uvalib-icon icon-id="uvalib:general:quoteright" ></uvalib-icon>
            <uvalib-icon icon-id="uvalib:general:print" ></uvalib-icon>
            <uvalib-icon icon-id="uvalib:general:copy" ></uvalib-icon>
            <uvalib-icon icon-id="uvalib:general:edit" ></uvalib-icon>
            <uvalib-icon icon-id="uvalib:general:trashalt" ></uvalib-icon>
            <uvalib-icon icon-id="uvalib:general:download" ></uvalib-icon>
            <uvalib-icon icon-id="uvalib:general:calendaralt" ></uvalib-icon>
            <uvalib-icon icon-id="uvalib:general:filepdf" ></uvalib-icon>
            <uvalib-icon icon-id="uvalib:general:envelope" ></uvalib-icon>
            <uvalib-icon icon-id="uvalib:general:bookmark" ></uvalib-icon>
            <uvalib-icon icon-id="uvalib:general:windowclose" ></uvalib-icon>
            <uvalib-icon icon-id="uvalib:general:timescircle" ></uvalib-icon>
            <uvalib-icon icon-id="uvalib:general:pluscircle" ></uvalib-icon>
            <uvalib-icon icon-id="uvalib:general:redoalt" ></uvalib-icon>
            <uvalib-icon icon-id="uvalib:general:chevrondoubleleft" ></uvalib-icon>
            <uvalib-icon icon-id="uvalib:general:chevrondoubleright" ></uvalib-icon>
            <uvalib-icon icon-id="uvalib:general:arrowright" ></uvalib-icon>
            <uvalib-icon icon-id="uvalib:general:arrowright" ></uvalib-icon>
            <uvalib-icon icon-id="uvalib:general:star" ></uvalib-icon>
            <uvalib-icon icon-id="uvalib:general:griphorizontal" ></uvalib-icon>
            <uvalib-icon icon-id="uvalib:general:list" ></uvalib-icon>
          </body>
        </script>
      
        <script type="sample/js" filename="index.js">
          import 'https://www.library.virginia.edu/module-build/uvalib-icon.js';
        </script>
      </playground-ide>    
                        
</uvalib-page>

</body>

</html>